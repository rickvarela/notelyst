(this["webpackJsonpnotelyst-v3"]=this["webpackJsonpnotelyst-v3"]||[]).push([[0],{48:function(e,t,n){},68:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),c=n(25),r=n.n(c),o=(n(48),n(5)),d=n(6),s=n(17),u=n(9),l=n(7),j=n(2),b=n(8),h=n.n(b),p=n(22),f=n(13),O=n(27),x=n(3),E=function(e){return"https://api.rickvarela.com"+e},v=Object(a.createContext)(),g=function(e){var t=e.children,n=Object(a.useState)({isLoaded:!1,authUser:null}),i=Object(j.a)(n,2),c=i[0],r=i[1],o={authState:c,authActions:{checkAuth:function(){var e=Object(p.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(E("/api/checkAuth"),{method:"GET",credentials:"include"}).then((function(e){return e.json()})).then((function(e){return e.authUser?(r({isLoaded:!0,authUser:e.authUser}),!0):(r({isLoaded:!0,authUser:null}),!1)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),login:function(e,t){fetch(E("/api/auth"),{method:"POST",credentials:"include",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}).then((function(){t()}))},signUp:function(e,t){fetch(E("/api/signup"),{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}).then((function(){t()}))},signOut:function(){var e=Object(p.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(E("/api/delete"),{method:"POST",credentials:"include"}).then((function(){r((function(e){return Object(l.a)(Object(l.a)({},e),{},{authUser:null})}))}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}};return Object(x.jsx)(v.Provider,{value:o,children:t})},m=function(){return Object(a.useContext)(v)},_=Object(a.createContext)(),S=function(e){return"https://api.rickvarela.com"+e},y=function(e,t){switch(t.type){case"UPDATE_NOTE_PROPS_UNDER_EDIT":return Object(l.a)(Object(l.a)({},e),{},{editorFocus:!1,data:e.data.map((function(n){return n._id===e._idUnderEdit?(t.payload.note.editorState&&(t.payload.note.saved=!!n.saved&&T(n.editorState,t.payload.note.editorState)),Object(l.a)(Object(l.a)({},n),t.payload.note)):n}))});case"CHANGE_NOTE_UNDER_EDIT":return Object(l.a)(Object(l.a)({},e),{},{editorFocus:!0,_idUnderEdit:t.payload._idUnderEdit});case"CREATE_NEW_NOTE":var n=Object(O.a)();return Object(l.a)(Object(l.a)({},e),{},{editorFocus:!0,_idUnderEdit:n,data:[w(n)].concat(Object(f.a)(e.data))});case"DELETE_NOTE":return 1===e.data.length?e:e._idUnderEdit===t.payload._idToDelete?(i=e.data.filter((function(e,n){return e._id!==t.payload._idToDelete||(a=n,!1)})),c=a===i.length?i[i.length-1]._id:i[a]._id,Object(l.a)(Object(l.a)({},e),{},{_idUnderEdit:c,data:i})):Object(l.a)(Object(l.a)({},e),{},{data:e.data.filter((function(e){return e._id!==t.payload._idToDelete}))});var a,i,c;case"INIT_NOTE_LIST_LOCALSTOAGE":return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:JSON.parse(sessionStorage.getItem("noteLyst-data"));if(e)return{_idUnderEdit:(e=e.map((function(e){return Object(l.a)(Object(l.a)({},e),{},{saved:!1,selection:{anchor:{path:[0,0],offset:0},focus:{path:[0,0],offset:0}}})})))[0]._id,editorFocus:!0,data:e};var t=Object(O.a)();return{_idUnderEdit:t,editorFocus:!0,data:[w(t)]}}();case"INIT_NOTE_LIST_DATABASE":return t.payload.initNoteState;case"RESET_NOTE_LIST":var r=Object(O.a)();return{_idUnderEdit:r,editorFocus:!0,data:[w(r)]};default:return e}};function T(e,t){if(e&&t){var n=Object.keys(e),a=Object.keys(t);if(n.length!==a.length)return!1;for(var i=0,c=n;i<c.length;i++){var r=c[i],o=e[r],d=t[r],s=N(o)&&N(d);if(s&&!T(o,d)||!s&&o!==d)return!1}return!0}}function N(e){return null!=e&&"object"===typeof e}var w=function(e){return{_id:e,saved:!0,editorState:[{type:"paragraph",children:[{text:""}]}],selection:{anchor:{path:[0,0],offset:0},focus:{path:[0,0],offset:0}}}};var U,C,A,k,D,I,P,L,R,M,F,G,J,B,W,q,z,H,V,X,$,K,Q,Y,Z=function(e){var t=e.children,n=m(),i=n.authState,c=n.authActions,r=Object(a.useReducer)(y,{}),o=Object(j.a)(r,2),d=o[0],s=o[1];Object(a.useEffect)((function(){d.data&&sessionStorage.setItem("noteLyst-data",JSON.stringify(d.data.map((function(e){return{_id:e._id,editorState:e.editorState}}))))}),[d.data]);var u=function(){var e=Object(p.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.checkAuth();case 2:e.sent?fetch(S("/api/notes/user"),{method:"GET",credentials:"include"}).then((function(e){return e.json()})).then((function(e){var t={_idUnderEdit:e[0]._id,editorFocus:!0,data:e.map((function(e){return Object(l.a)(Object(l.a)({},e),{},{saved:!0,selection:{anchor:{path:[0,0],offset:0},focus:{path:[0,0],offset:0}}})}))};s({type:"INIT_NOTE_LIST_DATABASE",payload:{initNoteState:t}})})).catch((function(){s({type:"INIT_NOTE_LIST_LOCALSTOAGE"})})):s({type:"INIT_NOTE_LIST_LOCALSTOAGE"});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),b={noteState:d,dispatchNoteState:s,noteActions:{updateNoteUnderEdit:function(e){s({type:"UPDATE_NOTE_PROPS_UNDER_EDIT",payload:{note:e}})},updateEditorStateUnderEdit:function(e){s({type:"UPDATE_NOTE_PROPS_UNDER_EDIT",payload:{note:{editorState:e}}})},updateSelectionUnderEdit:function(e){s({type:"UPDATE_NOTE_PROPS_UNDER_EDIT",payload:{note:{selection:e}}})},changeNoteUnderEdit:function(e){s({type:"CHANGE_NOTE_UNDER_EDIT",payload:{_idUnderEdit:e}})},createNewNote:function(){s({type:"CREATE_NEW_NOTE"})},deleteNote:function(e){i.authUser?fetch("/api/note/delete",{method:"POST",credentials:"include",body:JSON.stringify({_idToDelete:e}),headers:{"Content-Type":"application/json"}}).then((function(){s({type:"DELETE_NOTE",payload:{_idToDelete:e,saved:!0}})})).catch((function(){})):s({type:"DELETE_NOTE",payload:{_idToDelete:e,saved:!0}})},saveNote:function(e){fetch(S("/api/note"),{method:"POST",credentials:"include",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}).then((function(){s({type:"UPDATE_NOTE_PROPS_UNDER_EDIT",payload:{note:{saved:!0}}})}))},initNoteState:u,resetNotes:function(){s({type:"RESET_NOTE_LIST"})}}};return Object(x.jsx)(_.Provider,{value:b,children:t})},ee=function(){return Object(a.useContext)(_)},te=n(1),ne=n.p+"static/media/site-logo.fbbde1f3.svg",ae=n.p+"static/media/delete-icon.b49d62b8.svg",ie=n.p+"static/media/unsaved-icon.13111683.svg",ce=d.a.div(U||(U=Object(o.a)(["\n  background-color: #e7ebee;\n  width: ",";\n  overflow-x: hidden;\n  opacity: ",";\n  transition: opacity 700ms;\n  display: flex;\n  flex-direction: column;\n"])),(function(e){var t=e.screenState;return t.expandMenu?0:t.isMobile?"100%":"400px"}),(function(e){return e.screenState.expandMenu?0:"100%"})),re=function(e){var t=e.handelExpand,n=e.screenState;return Object(x.jsxs)(ce,{handelExpand:t,screenState:n,children:[Object(x.jsx)(ue,{handelExpand:t,screenState:n}),Object(x.jsx)(je,{handelExpand:t,screenState:n})]})},oe=d.a.div(C||(C=Object(o.a)(["\n  background-color: #324a5f;\n  color: white;\n  display: flex;\n  justify-content: space-between;\n"]))),de=d.a.img(A||(A=Object(o.a)(["\n  height: 25px;\n  margin: auto 5px;\n"]))),se=d.a.button(k||(k=Object(o.a)(["\n  text-decoration: none;\n  color: black;\n  background-color: #ced6df;\n  line-height: 35px;\n  padding: 0 10px;\n  text-align: center;\n  cursor: pointer;\n  border: none;\n\n  &:hover {\n    background-color: #bbc6d3;\n  }\n"]))),ue=function(e){var t=e.handelExpand,n=e.screenState,a=ee().dispatchNoteState;return Object(x.jsxs)(oe,{children:[Object(x.jsx)(de,{src:ne}),Object(x.jsxs)("div",{children:[n.isMobile&&Object(x.jsx)(se,{onClick:t,children:"CLOSE MENU"}),Object(x.jsx)(se,{onClick:function(){a({type:"CREATE_NEW_NOTE"})},children:"NEW NOTE"})]})]})},le=d.a.div(D||(D=Object(o.a)(["\n  overflow-y: auto;\n"]))),je=function(e){var t=e.handelExpand,n=e.screenState,a=ee(),i=a.noteState;a.dispatchNoteState;return Object(x.jsx)(le,{children:i.data.map((function(e){return Object(x.jsx)(Oe,{note:e,_idUnderEdit:i._idUnderEdit,handelExpand:t,screenState:n},e._id)}))})},be=d.a.div(I||(I=Object(o.a)(["\n  background-color: ",";\n  padding: 5px;\n  height: 60px;\n  display: flex;\n  flex-direction: row;\n  border-bottom: 1px solid #bbc6d3;\n  cursor: pointer;\n\n  &:hover {\n    background-color: ",";\n  }\n\n  img.deleteIcon {\n    opacity: 0;\n    height: 15px;\n  }\n\n  img.UnsavedIcon {\n    opacity: ",";\n    height: 15px;\n  }\n\n  &:hover img.deleteIcon {\n    opacity: 1;\n  }\n"])),(function(e){return e.isCurrent?"#A1B9CE":"none"}),(function(e){return e.isCurrent?"none":"#CED6DF"}),(function(e){return e.isSaved?0:1})),he=d.a.div(P||(P=Object(o.a)(["\n  width: 20px;\n  width: 20px;\n"]))),pe=d.a.div(L||(L=Object(o.a)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n  height: 100%;\n  width: 100%;\n  overflow: hidden;\n  padding-left: 5px;\n"]))),fe=d.a.div(R||(R=Object(o.a)(["\n  font-weight: ",";\n  margin: auto 0;\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  min-height: 1.5em;\n"])),(function(e){return e.bold?"bold":"normal"})),Oe=function(e){var t=e.note,n=e._idUnderEdit,a=e.handelExpand,i=e.screenState,c=ee().noteActions,r=m().authState,o=t.editorState;return Object(x.jsxs)(be,{isCurrent:t._id===n,isSaved:t.saved,children:[Object(x.jsxs)(he,{children:[Object(x.jsx)("img",{className:"deleteIcon",onClick:function(){c.deleteNote(t._id)},src:ae}),r.authUser&&Object(x.jsx)("img",{className:"UnsavedIcon",src:ie})]}),Object(x.jsxs)(pe,{onClick:function(){c.changeNoteUnderEdit(t._id),i.isMobile&&a()},children:[Object(x.jsx)(fe,{bold:!0,children:o.length<=1&&""===te.c.string(o[0])?"New note...":te.c.string(o[0])}),o.length>1&&Object(x.jsx)(fe,{children:o.slice(1).filter((function(e){return""!==te.c.string(e)})).map((function(e){return te.c.string(e).trim()})).join(" ")})]})]})},xe=n(24),Ee=n.p+"static/media/user-icon.e4431ccb.svg",ve=d.a.div(M||(M=Object(o.a)(["\n  //background-color: none;\n  flex: 1;\n  display: flex;\n  width: ",";\n  overflow: hidden;\n  flex-direction: column;\n"])),(function(e){var t=e.screenState;return t.isMobile&&t.expandMenu?"100%":0})),ge=function(e){var t=e.handelExpand;e.screenState;return Object(x.jsxs)(ve,{screenState:!0,children:[Object(x.jsx)(we,{handelExpand:t}),Object(x.jsx)(Ce,{})]})},me=d.a.div(F||(F=Object(o.a)(["\n  background-color: #324a5f;\n  color: white;\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n"]))),_e=d.a.button(G||(G=Object(o.a)(["\n  text-decoration: none;\n  color: black;\n  background-color: #ced6df;\n  line-height: 35px;\n  padding: 0 10px;\n  text-align: center;\n  cursor: pointer;\n  border: none;\n\n  &:hover {\n    background-color: #bbc6d3;\n  }\n"]))),Se=d.a.nav(J||(J=Object(o.a)(["\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n"]))),ye=Object(d.a)(s.b)(B||(B=Object(o.a)(["\n  text-decoration: none;\n  color: black;\n  background-color: #ced6df;\n  line-height: 35px;\n  padding: 0 10px;\n  text-align: center;\n  cursor: pointer;\n\n  &:hover {\n    background-color: #bbc6d3;\n  }\n"]))),Te=d.a.img(W||(W=Object(o.a)(["\n  height: 20px;\n"]))),Ne=d.a.div(q||(q=Object(o.a)(["\n  margin: 0 40px 0 10px;\n"]))),we=function(e){var t=e.handelExpand,n=m(),a=n.authState,i=n.authActions,c=ee(),r=c.noteState,o=c.noteActions;return Object(x.jsxs)(me,{children:[Object(x.jsxs)("div",{children:[Object(x.jsx)(_e,{onClick:t,children:"EXPAND MENU"}),a.authUser&&Object(x.jsx)(_e,{onClick:function(){o.saveNote(r.data.filter((function(e){return e._id===r._idUnderEdit}))[0])},children:"SAVE NOTE"})]}),Object(x.jsx)(Se,{children:a.authUser?Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(Te,{src:Ee}),Object(x.jsx)(Ne,{children:a.authUser.username}),Object(x.jsx)(_e,{onClick:function(){i.signOut().then((function(){o.resetNotes()}))},children:"SIGN OUT"})]}):Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(ye,{to:"/signup",role:"button",children:"SIGN UP"}),Object(x.jsx)(ye,{to:"/login",role:"button",children:"LOGIN"})]})})]})},Ue=d.a.div(z||(z=Object(o.a)(["\n  flex: 1;\n  padding: 40px;\n"]))),Ce=function(){var e=Object(a.useMemo)((function(){return Object(xe.d)(Object(te.h)())}),[]),t=ee(),n=t.noteState,i=t.noteActions;Object(a.useEffect)((function(){n.editorFocus&&(te.g.select(e,c()),xe.b.focus(e))}),[n]);var c=function(){return n.data.filter((function(e){return e._id===n._idUnderEdit}))[0].selection};return Object(x.jsx)(Ue,{children:Object(x.jsx)(xe.c,{editor:e,value:n.data.filter((function(e){return e._id===n._idUnderEdit}))[0].editorState,onChange:i.updateEditorStateUnderEdit,children:Object(x.jsx)(xe.a,{placeholder:"Enter some text...",onBlur:function(){return i.updateSelectionUnderEdit(e.selection)}})})})},Ae=d.a.div(H||(H=Object(o.a)(["\n  display: flex;\n  flex-direction: row;\n  width: 100%;\n"]))),ke=function(){var e=Object(a.useState)({isMobile:window.innerWidth<800,expandMenu:!1}),t=Object(j.a)(e,2),n=t[0],i=t[1],c=ee(),r=c.noteState,o=c.noteActions;Object(a.useEffect)((function(){o.initNoteState();var e=function(){i((function(e){return Object(l.a)(Object(l.a)({},e),{},{isMobile:window.innerWidth<800})}))};return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[]);var d=function(){i((function(e){return Object(l.a)(Object(l.a)({},e),{},{expandMenu:!e.expandMenu})}))};return r.data?Object(x.jsxs)(Ae,{children:[Object(x.jsx)(re,{handelExpand:d,screenState:n}),Object(x.jsx)(ge,{handelExpand:d,screenState:n})]}):null},De=n(10),Ie=d.a.div(V||(V=Object(o.a)(["\n  background-color: #324a5f;\n  color: white;\n  height: 35px;\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n"]))),Pe=d.a.img(X||(X=Object(o.a)(["\n  height: 25px;\n  margin-left: 5px;\n"]))),Le=function(){return Object(x.jsx)(Ie,{children:Object(x.jsx)(Pe,{src:ne})})},Re=d.a.form($||($=Object(o.a)(["\n  display: flex;\n  flex-direction: column;\n  max-width: 400px;\n  margin: auto;\n  border: 1px solid black;\n  padding: 40px;\n  border-radius: 5px;\n\n  > input {\n    font-size: 1.25rem;\n  }\n\n  > input:-webkit-autofill::first-line {\n    font-family: $body-font;\n    font-size: 1.25rem;\n  }\n\n  input[type='submit'] {\n    margin-top: 20px;\n  }\n"]))),Me=d.a.div(K||(K=Object(o.a)(["\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n"]))),Fe=function(){var e=Object(a.useState)({username:"",email:"",password:""}),t=Object(j.a)(e,2),n=t[0],i=t[1],c=Object(u.f)(),r=m().authActions,o=function(e){var t=e.target,n=t.value,a=t.name;i((function(e){return Object(l.a)(Object(l.a)({},e),{},Object(De.a)({},a,n))}))};return Object(x.jsxs)(Me,{children:[Object(x.jsx)(Le,{}),Object(x.jsxs)(Re,{onSubmit:function(e){e.preventDefault(),r.signUp(n,(function(){c.push("/")}))},children:[Object(x.jsx)("h2",{children:"Create a new account"}),Object(x.jsx)("label",{children:"UserName"}),Object(x.jsx)("input",{type:"text",name:"username",placeholder:"Enter Username",value:n.username,onChange:o,required:!0}),Object(x.jsx)("label",{children:"Email"}),Object(x.jsx)("input",{type:"text",name:"email",placeholder:"Enter Email",value:n.email,onChange:o,required:!0}),Object(x.jsx)("label",{children:"Password"}),Object(x.jsx)("input",{type:"text",name:"password",placeholder:"Enter Password",value:n.password,onChange:o,required:!0}),Object(x.jsx)("input",{type:"submit"})]})]})},Ge=d.a.div(Q||(Q=Object(o.a)(["\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n"]))),Je=function(){var e=Object(u.f)(),t=Object(a.useState)({username:"",password:""}),n=Object(j.a)(t,2),i=n[0],c=n[1],r=m().authActions,o=function(e){var t=e.target,n=t.value,a=t.name;c((function(e){return Object(l.a)(Object(l.a)({},e),{},Object(De.a)({},a,n))}))};return Object(x.jsxs)(Ge,{children:[Object(x.jsx)(Le,{}),Object(x.jsxs)(Re,{onSubmit:function(t){t.preventDefault(),r.login(i,(function(){e.push("/")}))},children:[Object(x.jsx)("h2",{children:"Login"}),Object(x.jsx)("label",{children:"UserName"}),Object(x.jsx)("input",{type:"text",name:"username",placeholder:"Enter Username",value:i.username,onChange:o,required:!0}),Object(x.jsx)("label",{children:"Password"}),Object(x.jsx)("input",{type:"password",name:"password",placeholder:"Enter Username",value:i.password,onChange:o,required:!0}),Object(x.jsx)("input",{type:"submit",value:"submit"})]})]})},Be=d.a.div(Y||(Y=Object(o.a)(["\n  display: flex;\n  flex-direction: row;\n  height: 100vh;\n  width: 100vw;\n  font-family: 'Nunito', sans-serif;\n"])));var We=function(){return Object(x.jsx)(Be,{children:Object(x.jsx)(s.a,{children:Object(x.jsxs)(u.c,{children:[Object(x.jsx)(u.a,{path:"/",exact:!0,children:Object(x.jsx)(Z,{children:Object(x.jsx)(ke,{})})}),Object(x.jsx)(u.a,{path:"/signup",children:Object(x.jsx)(Fe,{})}),Object(x.jsx)(u.a,{path:"/login",children:Object(x.jsx)(Je,{})})]})})})},qe=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,69)).then((function(t){var n=t.getCLS,a=t.getFID,i=t.getFCP,c=t.getLCP,r=t.getTTFB;n(e),a(e),i(e),c(e),r(e)}))};r.a.render(Object(x.jsx)(i.a.StrictMode,{children:Object(x.jsx)(g,{children:Object(x.jsx)(We,{})})}),document.getElementById("root")),qe()}},[[68,1,2]]]);
//# sourceMappingURL=main.6c5b36a6.chunk.js.map